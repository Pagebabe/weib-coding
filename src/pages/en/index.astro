---
import Base from "../../layouts/BaseLayout.astro";
import common from "../../i18n/en/common.json";
import Hero from "../../components/home/Hero.astro";
import Section from "../../components/home/Section.astro";
import FeaturedSplit from "../../components/home/FeaturedSplit.astro";
import PropertyGrid from "../../components/home/PropertyGrid.astro";
import { loadProps } from "../../lib/loadProps";
import ServiceCard from "../../components/home/ServiceCard";
import { Home, MapPin, Handshake } from "lucide-react";
const all = await loadProps('en');
const prioritized = ['park-villa-privatpool','luxury-condo-beach','family-house-naklua','budget-studio-jomtien'];
let top4 = all.filter(p => prioritized.includes(p.slug)).slice(0, 4);
if (top4.length < 4) {
  top4 = top4.concat(all.filter(p => !prioritized.includes(p.slug)).slice(0, 4 - top4.length));
}
const featured = all.slice(0, 6);
---
<Base lang="en" title="Real Estate in Pattaya – Weib-Coding" description="Professional real estate consultation in Pattaya. Sales, rentals and services for villas, condos and houses. Discover now!">
  <div class="container section pt-6">
    <Hero locale="en" title={common.heroTitle} subtitle={common.heroSubtitle} image="/images/hero/en.jpg" ctaPrimary={common.ctaPrimary} ctaSecondary={common.ctaSecondary} />
  </div>
  <Section title="Latest listings" subtitle="Discover our newest properties in Pattaya">
    {top4.length >= 4 ? <FeaturedSplit items={top4} /> : <PropertyGrid items={featured} />}
    <div class="mt-6"><a class="underline" href="/en/properties/">View all properties</a></div>
  </Section>
  <Section title="Our Services" subtitle="Full service for your real estate needs">
    <div class="grid md:grid-cols-3 gap-6">
      <ServiceCard client:load icon={Home} title="Property Sales" desc="Professional marketing with modern strategies." />
      <ServiceCard client:load icon={MapPin} title="Location Advisory" desc="Find the right area for your needs." />
      <ServiceCard client:load icon={Handshake} title="Full Service" desc="From search to closing – we guide you." />
    </div>
  </Section>
</Base>
