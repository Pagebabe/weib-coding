---
import Base from "../../layouts/BaseLayout.astro";
import common from "../../i18n/de/common.json";
import Hero from "../../components/home/Hero.astro";
import Section from "../../components/home/Section.astro";
import FeaturedSplit from "../../components/home/FeaturedSplit.astro";
import PropertyGrid from "../../components/home/PropertyGrid.astro";
import { loadProps } from "../../lib/loadProps";
import ServiceCard from "../../components/home/ServiceCard";
import { Home, MapPin, Handshake } from "lucide-react";
const all = await loadProps('de');
// Aktualisierte Immobilien-Prioritäten basierend auf der Live-Website
const prioritized = ['beachfront-villa-jomtien','family-house-naklua','luxury-condo-beach','modern-apartment-central'];
let top4 = all.filter(p => prioritized.includes(p.slug)).slice(0, 4);
if (top4.length < 4) {
  top4 = top4.concat(all.filter(p => !prioritized.includes(p.slug)).slice(0, 4 - top4.length));
}
const featured = all.slice(0, 6);
---
<Base lang="de" title="Immobilien in Pattaya – Weib-Coding" description="Professionelle Immobilienberatung in Pattaya. Verkauf, Vermietung und Service für Villen, Condos und Häuser. Jetzt entdecken!">
  <div class="container section pt-6">
    <Hero 
      locale="de" 
      title={common.heroTitle} 
      subtitle={common.heroSubtitle} 
      images={[
        "https://images.unsplash.com/photo-1544984243-ec57ea16fe25?w=1200&h=500&fit=crop&crop=center",
        "https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=1200&h=500&fit=crop&crop=center",
        "https://images.unsplash.com/photo-1570129477492-45c003edd2be?w=1200&h=500&fit=crop&crop=center"
      ]}
      ctaPrimary={common.ctaPrimary} 
      ctaSecondary={common.ctaSecondary} 
    />
  </div>

  <Section title="Aktuelle Angebote" subtitle="Entdecken Sie unsere neuesten Immobilien in Pattaya">
    {top4.length >= 4 ? <FeaturedSplit items={top4} /> : <PropertyGrid items={featured} />}
    <div class="mt-6">
      <a class="underline" href="/de/properties/">Alle Immobilien anzeigen</a>
    </div>
  </Section>

  <Section title="Unsere Services" subtitle="Vollservice für Ihre Immobilienbedürfnisse">
    <div class="grid md:grid-cols-3 gap-6">
      <ServiceCard client:load icon={Home} title="Immobilienverkauf" desc="Professionelle Vermarktung mit modernen Marketingstrategien." />
      <ServiceCard client:load icon={MapPin} title="Standortberatung" desc="Finden Sie den perfekten Standort für Ihre Bedürfnisse." />
      <ServiceCard client:load icon={Handshake} title="Vollservice" desc="Von der Suche bis zum Vertragsabschluss – wir begleiten Sie." />
    </div>
  </Section>
</Base>
